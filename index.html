<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <title>I love youuu - Web</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --pink: #ee799f;
      --red: #dc143c;
      --green: #00b400;
      --text: #fff;
      --bg: rgb(238, 121, 159);
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; margin: 0; font-family: Arial Bold, sans-serif; background: #fff; color: var(--text);font-weight: bold; }
    #stage {
      width: 100%;
      height: 100vh;
      display: grid;
      place-items: center;
      background: rgb(238, 121, 159);
      overflow: hidden;
    }
    #canvas {
      position: relative;
      width: 800px;
      height: 600px;
      border: 0px solid #ddd;
      background: rgb(238, 121, 159);
      box-shadow: 0 0px 0px rgba(0,0,0,.05);
    }
    .btn {
      position: absolute;
      width: 180px;
      height: 60px;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      user-select: none;
      font-weight: bold;
      color: rgb(205, 16, 118);
      background: #fff;
      border: 2px solid #e3e3e3;
    }
    .btn:hover { filter: brightness(0.98); }
    #haveBtn { color: rgb(205, 16, 118); background: fff;border: 5px solid rgb(205, 16, 118); }
    #noBtn { color: #fff; background: #000;border: 5px solid #e3e3e3; }

    #message {
      position: absolute;
      top: 120px;
      left: 50%;
      transform: translateX(-50%);
      text-align: center;
      width: 100%;
      font-size: 35px;
      line-height: 1.4;
      color: rgb(205, 16, 118);
    }

    #thanksOverlay {
      position: absolute;
      inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      background: rgb(238, 121, 159);
      text-align: center;
      width: 100%;
      font-family: Arial Bold;
      font-size: 35px;
    }
    #thanksOverlay.active {
      display: flex;
      font-size: 35px;
      padding: 20px;
    }
  </style>
</head>
<body>
  <div id="stage">
    <div id="canvas" aria-label="Canvas tương tác">
      <div id="message">Tui thích ní! Làm người yêuu tuii được hoggggg?</div>
      <div id="haveBtn" class="btn" role="button" aria-label="Có">Cóoo</div>
      <div id="noBtn" class="btn" role="button" aria-label="Không">hong=((</div>

      <div id="thanksOverlay" aria-live="polite">uiii, đã quá! Lovee youuu!!</div>
    </div>
  </div>

  <script>
    // Kết cấu tham chiếu từ mã Python sang JS
    const WIDTH = 800;
    const HEIGHT = 600;

    // Thông số nút
    const haveBtn = {
      el: document.getElementById('haveBtn'),
      x: WIDTH * 0.25,
      y: HEIGHT * 0.7,
      w: 180,
      h: 60,
      fontSize: 28
    };

    const noBtn = {
      el: document.getElementById('noBtn'),
      x: WIDTH * 0.75 - 180,
      y: HEIGHT * 0.7,
      w: 180,
      h: 60,
      fontSize: 28,
      color: 'rgb(205, 16, 118)'

    };

    const messageEl = document.getElementById('message');
    const thanksOverlay = document.getElementById('thanksOverlay');

    let showThanks = false;

    // Phương thức vẽ/điều phối vị trí nút
    function layoutButtons() {
      haveBtn.el.style.left = haveBtn.x + 'px';
      haveBtn.el.style.top = haveBtn.y + 'px';
      haveBtn.el.style.width = haveBtn.w + 'px';
      haveBtn.el.style.height = haveBtn.h + 'px';
      haveBtn.el.style.fontSize = haveBtn.fontSize + 'px';

      noBtn.el.style.left = noBtn.x + 'px';
      noBtn.el.style.top = noBtn.y + 'px';
      noBtn.el.style.width = noBtn.w + 'px';
      noBtn.el.style.height = noBtn.h + 'px';
      noBtn.el.style.fontSize = noBtn.fontSize + 'px';
    }

    // Khoảng cách từ con trỏ đến tâm nút Không
    function distToNoCenter(px, py) {
      const cx = noBtn.x + noBtn.w / 2;
      const cy = noBtn.y + noBtn.h / 2;
      const dx = px - cx;
      const dy = py - cy;
      return Math.hypot(dx, dy);
    }

    // Xử lý move near
    const NO_NEAR_RADIUS = 120;
    function updateNearBehavior(mx, my) {
      const centerDist = distToNoCenter(mx, my);
      const near = centerDist < NO_NEAR_RADIUS;

      if (near) {
        // Đổi vị trí Nút Không
        const margin = 40;
        const newX = Math.floor(Math.random() * (WIDTH+Math.random(700,-1000) - noBtn.w - margin * 2)) + margin;
        const newY = Math.floor(Math.random() * (HEIGHT+100 - noBtn.h - margin * 2)) + margin;
        noBtn.x = newX;
        noBtn.y = newY;

        // Giảm kích thước của Nút Không
        noBtn.w = Math.max(130, noBtn.w - 2);
        noBtn.h = Math.max(50, noBtn.h - 2);

        // Tăng kích thước của Nút Có
        haveBtn.w = Math.min(WIDTH, haveBtn.w + 3);
        haveBtn.h = Math.min(HEIGHT, haveBtn.h + 2);
      }
    }

    // Xử lý nhấp chuột
    function onClick(e) {
      if (showThanks) return;
      const rect = document.getElementById('canvas').getBoundingClientRect();
      const mx = e.clientX - rect.left;
      const my = e.clientY - rect.top;

      // Kiểm tra nhấn Have
      if (mx >= haveBtn.x && mx <= haveBtn.x + haveBtn.w &&
          my >= haveBtn.y && my <= haveBtn.y + haveBtn.h) {
        showThanks = true;
        thanksOverlay.style.display = 'flex';
        // hiển thị cảm ơn và dừng
        setTimeout(() => {
          // Kết thúc hoặc ẩn
          // Tắt toàn bộ vòng lặp (ở web sẽ là hết)
          // Ở đây chỉ ẩn overlay để người dùng có thể đóng trang
          thanksOverlay.textContent = 'loveee youuuu ><'; // tùy ý
        }, 2000);
        return;
      }

      // Kiểm tra nhấn No (không bắt sự kiện riêng)
      if (mx >= noBtn.x && mx <= noBtn.x + noBtn.w &&
          my >= noBtn.y && my <= noBtn.y + noBtn.h) {
        // không làm gì ngoài việc xử lý near ở đầu chuột
      }
    }

    // Lắng nghe sự kiện chuột
    window.addEventListener('mousemove', (e) => {
      const rect = document.getElementById('canvas').getBoundingClientRect();
      const mx = e.clientX - rect.left;
      const my = e.clientY - rect.top;
      if (!showThanks) {
        updateNearBehavior(mx, my);
        layoutButtons();
      }
    });

    window.addEventListener('mousedown', onClick);

    // Khởi tạo lần đầu
    layoutButtons();

  </script>
</body>
</html>
