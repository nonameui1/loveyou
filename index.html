<!DOCTYPE html>  
<html lang="en">  
<head>  
  <meta charset="UTF-8" />  
  <title>Crush - Responsive Mobile Friendly</title>  
  <meta name="viewport" content="width=device-width, initial-scale=1" />  
  <style>  
    html, body {  
      margin: 0;  
      height: 100%;  
      background: #000;  
      overflow: hidden;  
    }  
    #stage {  
      display: block;  
      width: 100%;  
      height: 100%;  
      touch-action: none; /* để tương tác mượt trên cảm ứng nếu cần */  
    }  
  </style>  
</head>  
<body>  
  <canvas id="stage"></canvas>  

  <script>  
    // Cấu hình gốc  
    const BASE_W = 1300;  
    const BASE_H = 800;  

    const canvas = document.getElementById('stage');  
    const ctx = canvas.getContext('2d');  

    // Biến dựng sẵn cho nội dung (sẽ được cập nhật theo scale)  
    let WIDTH = BASE_W;  
    let HEIGHT = BASE_H;  
    let globalScale = 1;  

    // Font tham khảo (sẽ điều chỉnh theo scale)  
    let fontMain = "bold 48px Arial"; // default, sẽ cập nhật  
    const logoFontFamily = "Courier New";  

    // Lyrics (dữ liệu) - vẫn giữ nguyên  
    const lyrics = [  
      ["Gio nay mat troi cua em da la ai", 0.35, 0.8],  
      ["Vi gio nay trong trai tim em la anh", 0.3, 0.5],  
      ["Va roi nguoi co thay khong", 0.35, 0.5],  
      ["You are tired", 0.2, 0.6],  
      ["Sao cu quan quanh mai trong tam tri em", 0.33, 0.8],  
      ["Ke tu ngay anh den day tim em vun vo", 0.25, 0.7],  
      ["Chot nhiu lan om lay anh tinh giac lai mo", 0.25, 0.5],  
      ["Va roi nguoi co the cho", 0.3, 0.7],  
      ["Hay co thay gio", 0.1, 0.8],  
      ["Trai tim em lac roi noi nao", 0.3, 0.8],  
    ];  

    const BLACK = "#000000";  
    const WHITE = "#e6e6e6";  
    const LOGO_COLOR = "#b4b4b4";  
    const CIRCLE_COLORS = [  
      "rgba(255,255,255,0.31)",  
      "rgba(200,0,0,0.31)",  
      "rgba(150,150,150,0.31)"  
    ];  

    // NoiseSpot mô phỏng hiệu ứng điểm sáng ngẫu nhiên  
    class NoiseSpot {  
      constructor() { this.reset(); }  
      reset() {  
        this.x = Math.floor(Math.random() * WIDTH);  
        this.y = Math.floor(Math.random() * HEIGHT);  
        this.size = Math.floor(Math.random() * 6) + 3;  
        const gray = Math.floor(Math.random() * 101) + 80;  
        this.color = `rgb(${gray},${gray},${gray})`;  
        this.lifetime = Math.random() * 0.3 + 0.3;  
        this.birth = performance.now() / 1000;  
      }  
      draw(ctx) {  
        const now = performance.now() / 1000;  
        if (now - this.birth > this.lifetime) this.reset();  
        ctx.fillStyle = this.color;  
        ctx.fillRect(this.x, this.y, this.size, this.size);  
      }  
    }  

    const noises = Array.from({ length: 60 }, () => new NoiseSpot());  
    const circles = [];  

    // wrap_text với font hiện tại  
    function wrapText(words, font, maxWidth) {  
      ctx.font = font;  
      const lines = [];  
      let current = [];  
      for (let w of words) {  
